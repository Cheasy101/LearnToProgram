@using Microsoft.AspNetCore.Mvc.TagHelpers
@model Contracts.Requests.Manager.LessonsCrud.AdminLessonResponseModel

@{
    ViewBag.Title = "Управление уроками";
    Layout = "_Layout";
}

<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>@ViewBag.Title</h2>
        <a asp-action="Edit" class="btn btn-success">
            <i class="fas fa-plus mr-2"></i>Создать урок
        </a>
    </div>

    <div class="table-responsive admin-lessons-table">
        <table class="table table-bordered table-striped table-hover">
            <thead>
            <tr>
                <th style="width: 15%">Изображение</th>
                <th>Название урока</th>
                <th style="width: 15%">Видео</th>
                <th style="width: 15%">Действия</th>
            </tr>
            </thead>
            <tbody>
            @foreach (var lesson in Model.Lessons)
            {
                <tr>
                    <td class="text-center">
                        @if (!string.IsNullOrEmpty(lesson.LessonPhotoUrl))
                        {
                            <img src="@Url.Content(lesson.LessonPhotoUrl)"
                                 class="lesson-image"
                                 alt="Превью урока">
                        }
                        else
                        {
                            <span class="text-muted">Нет изображения</span>
                        }
                    </td>
                    <td>@lesson.SmallDescription</td>
                    <td class="text-center">
                        @if (!string.IsNullOrEmpty(lesson.VideoLink))
                        {
                            <a href="@lesson.VideoLink"
                               target="_blank"
                               class="btn btn-outline-primary btn-sm">
                                <i class="fas fa-play"></i>
                            </a>
                        }
                    </td>
                    <td>
                        <div class="action-buttons">
                            <a asp-action="Edit"
                               asp-route-id="@lesson.Id"
                               class="btn btn-primary btn-sm"
                               title="Редактировать">
                                <i class="fas fa-edit"></i>
                            </a>
                            <form asp-action="Delete" method="post">
                                <input type="hidden" name="id" value="@lesson.Id">
                                <button type="submit"
                                        class="btn btn-danger btn-sm"
                                        title="Удалить"
                                        onclick="return confirm('Удалить урок?')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
            }
            </tbody>
        </table>
    </div>
</div>